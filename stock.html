<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Stok Y√∂netimi</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Stok y√∂netim paneli" />
	<meta name="author" content="" />

	<!-- CSS -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/style.css">
	
	<style>
		/* Stok Y√∂netimi Sayfasƒ± Stilleri */
		* {
			box-sizing: border-box;
		}
		
		body {
			margin: 0;
			padding: 0;
			font-family: "Montserrat", Arial, sans-serif;
			background: linear-gradient(135deg, #10b981 0%, #059669 25%, #047857 50%, #065f46 75%, #064e3b 100%);
			background-size: 400% 400%;
			animation: gradientShift 15s ease infinite, fadeIn 0.4s ease-in;
			min-height: 100vh;
		}
		
		@keyframes gradientShift {
			0% { background-position: 0% 50%; }
			50% { background-position: 100% 50%; }
			100% { background-position: 0% 50%; }
		}
		
		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
		
		/* Ge√ßi≈ü Overlay */
		.page-transition-overlay {
			position: fixed !important;
			top: 0 !important;
			left: 0 !important;
			right: 0 !important;
			bottom: 0 !important;
			width: 100vw !important;
			height: 100vh !important;
			background: linear-gradient(135deg, #10b981 0%, #059669 100%);
			z-index: 99999 !important;
			opacity: 0;
			pointer-events: none;
			transition: opacity 0.3s ease-out;
			display: flex !important;
			align-items: center !important;
			justify-content: center !important;
			margin: 0 !important;
			padding: 0 !important;
		}
		
		.page-transition-overlay.hide {
			opacity: 0;
			pointer-events: none;
		}
		
		.page-transition-overlay.show {
			opacity: 1;
			pointer-events: all;
		}
		
		.page-transition-overlay .spinner {
			width: 60px;
			height: 60px;
			border: 4px solid rgba(255, 255, 255, 0.3);
			border-top-color: #fff;
			border-radius: 50%;
			animation: spin 0.8s linear infinite;
			margin: 0 auto;
			flex-shrink: 0;
		}
		
		@keyframes spin {
			to { transform: rotate(360deg); }
		}
		
		/* Header */
		.stock-header {
			background: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(20px);
			-webkit-backdrop-filter: blur(20px);
			color: #fff;
			padding: 24px 32px;
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
			            0 0 0 1px rgba(255, 255, 255, 0.2) inset;
			border-bottom: 2px solid rgba(255, 255, 255, 0.1);
			position: sticky;
			top: 0;
			z-index: 100;
			position: relative;
			overflow: hidden;
		}
		
		.stock-header::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
			animation: shimmer 3s infinite;
		}
		
		@keyframes shimmer {
			0% { left: -100%; }
			100% { left: 100%; }
		}
		
		.stock-header-content {
			max-width: 1400px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			flex-wrap: nowrap;
			gap: 20px;
			position: relative;
			z-index: 1;
		}
		
		.stock-header-content > h1 {
			flex-shrink: 0;
			margin: 0;
		}
		
		.stock-header-actions {
			flex-shrink: 0;
			display: flex;
			align-items: center;
			gap: 12px;
			flex-wrap: nowrap;
			min-width: 0;
		}
		
		.stock-header h1 {
			margin: 0;
			font-size: 32px;
			font-weight: 700;
			display: flex;
			align-items: center;
			gap: 14px;
			background: linear-gradient(135deg, #fff 0%, rgba(255, 255, 255, 0.8) 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			text-shadow: 0 2px 10px rgba(255, 255, 255, 0.3);
			letter-spacing: -0.5px;
		}
		
		
		#bulkActions {
			display: none;
			align-items: center;
			gap: 12px;
			flex-wrap: nowrap;
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(15px);
			-webkit-backdrop-filter: blur(15px);
			padding: 12px 20px;
			border-radius: 16px;
			border: 1.5px solid rgba(255, 255, 255, 0.3);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
			flex-shrink: 0;
		}
		
		#bulkActions.show {
			display: flex;
		}
		
		#selectedCount {
			color: #fff;
			font-weight: 600;
			font-size: 15px;
			padding: 10px 18px;
			background: rgba(255, 255, 255, 0.25);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			border-radius: 10px;
			white-space: nowrap;
			border: 1px solid rgba(255, 255, 255, 0.3);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		}
		
		.btn-admin {
			background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.15) 100%);
			color: #fff;
			padding: 12px 24px;
			border: none;
			border-radius: 12px;
			font-size: 14px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
			white-space: nowrap;
			position: relative;
			overflow: hidden;
		}
		
		.btn-admin::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
			transition: left 0.5s ease;
		}
		
		.btn-admin:hover::before {
			left: 100%;
		}
		
		.btn-admin:hover {
			background: linear-gradient(135deg, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0.25) 100%);
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.btn-admin:active {
			transform: translateY(0) scale(0.98);
		}
		
		.btn-bulk-add {
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
		}
		
		.btn-bulk-remove {
			background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
			color: #fff;
		}
		
		.btn-bulk-clear {
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			color: #fff;
			border: 1.5px solid rgba(255, 255, 255, 0.3);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.btn-back {
			background: rgba(255, 255, 255, 0.2);
			color: #fff;
			padding: 12px 24px;
			border: 1.5px solid rgba(255, 255, 255, 0.3);
			border-radius: 12px;
			text-decoration: none;
			font-size: 14px;
			font-weight: 600;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			display: inline-flex;
			align-items: center;
			gap: 8px;
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
			position: relative;
			overflow: hidden;
			flex-shrink: 0;
			white-space: nowrap;
		}
		
		.btn-back::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
			transition: left 0.5s ease;
		}
		
		.btn-back:hover::before {
			left: 100%;
		}
		
		.btn-back:hover {
			background: rgba(255, 255, 255, 0.3);
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
			border-color: rgba(255, 255, 255, 0.5);
		}
		
		/* Main Container */
		.stock-container {
			max-width: 1400px;
			margin: 0 auto;
			padding: 30px 20px;
			display: flex;
			gap: 30px;
			align-items: flex-start;
		}
		
		/* Sol Panel */
		.stock-sidebar {
			width: 320px;
			background: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(20px);
			-webkit-backdrop-filter: blur(20px);
			border-radius: 20px;
			padding: 25px;
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
			            0 0 0 1px rgba(255, 255, 255, 0.2) inset;
			border: 1.5px solid rgba(255, 255, 255, 0.2);
			position: sticky;
			top: 100px;
			max-height: calc(100vh - 120px);
			overflow-y: auto;
			z-index: 10;
		}
		
		.stock-sidebar-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
			padding-bottom: 15px;
			border-bottom: 2px solid rgba(255, 255, 255, 0.2);
		}
		
		.stock-sidebar-header h2 {
			margin: 0;
			font-size: 20px;
			color: #fff;
			text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
		}
		
		.sidebar-toggle {
			display: none;
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
			border: none;
			border-radius: 10px;
			padding: 12px 20px;
			cursor: pointer;
			font-size: 16px;
			font-weight: 600;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.sidebar-toggle:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		/* Toplam Stok */
		.total-stock-box {
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
			padding: 24px;
			border-radius: 16px;
			margin-bottom: 25px;
			text-align: center;
			box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
			border: 1px solid rgba(255, 255, 255, 0.2);
		}
		
		.total-stock-box h3 {
			margin: 0 0 10px 0;
			font-size: 14px;
			font-weight: 500;
			opacity: 0.9;
		}
		
		.total-stock-box .stock-number {
			font-size: 36px;
			font-weight: 700;
			margin: 0;
		}
		
		/* Kategori Filtreleri */
		.filter-section {
			margin-bottom: 25px;
		}
		
		.filter-section h3 {
			margin: 0 0 12px 0;
			font-size: 14px;
			font-weight: 600;
			color: #fff;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
		}
		
		.filter-checkbox-container {
			max-height: 250px;
			overflow-y: auto;
			border: 1.5px solid rgba(255, 255, 255, 0.2);
			border-radius: 12px;
			padding: 12px;
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
		}
		
		.filter-checkbox-item {
			display: flex;
			align-items: center;
			padding: 12px 14px;
			margin-bottom: 8px;
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			border-radius: 12px;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			border: 1.5px solid rgba(255, 255, 255, 0.2);
			position: relative;
		}
		
		.filter-checkbox-item:hover {
			background: rgba(255, 255, 255, 0.3);
			border-color: rgba(16, 185, 129, 0.4);
			transform: translateX(4px);
			box-shadow: 0 4px 16px rgba(16, 185, 129, 0.2);
		}
		
		.filter-checkbox-item input[type="checkbox"] {
			position: absolute;
			opacity: 0;
			cursor: pointer;
			height: 0;
			width: 0;
		}
		
		/* Custom Checkbox */
		.checkbox-custom {
			position: relative;
			display: inline-block;
			width: 22px;
			height: 22px;
			margin-right: 12px;
			flex-shrink: 0;
		}
		
		.checkbox-custom .checkmark {
			position: absolute;
			top: 0;
			left: 0;
			height: 22px;
			width: 22px;
			background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
			border: 2px solid #d1d5db;
			border-radius: 6px;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		.filter-checkbox-item:hover .checkbox-custom .checkmark {
			border-color: #10b981;
			background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
		}
		
		.filter-checkbox-item input:checked ~ .checkbox-custom .checkmark {
			background: linear-gradient(135deg, #10b981 0%, #059669 100%);
			border-color: #10b981;
			box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
		}
		
		.checkbox-custom .checkmark:after {
			content: "";
			position: absolute;
			display: none;
			left: 7px;
			top: 3px;
			width: 5px;
			height: 10px;
			border: solid white;
			border-width: 0 2px 2px 0;
			transform: rotate(45deg);
		}
		
		.filter-checkbox-item input:checked ~ .checkbox-custom .checkmark:after {
			display: block;
		}
		
		.filter-checkbox-item label {
			margin: 0;
			cursor: pointer;
			font-size: 14px;
			color: rgba(255, 255, 255, 0.9);
			flex: 1;
			font-weight: 500;
			user-select: none;
		}
		
		.filter-checkbox-item input:checked ~ label {
			color: #fff;
			font-weight: 600;
		}
		
		.filter-actions {
			display: flex;
			gap: 8px;
			margin-top: 12px;
		}
		
		.btn-filter {
			flex: 1;
			padding: 10px 16px;
			border: none;
			border-radius: 10px;
			font-size: 12px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		}
		
		.btn-filter-primary {
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
			box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.btn-filter-primary:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.btn-filter-secondary {
			background: linear-gradient(135deg, #6b7280 0%, #4b5563 50%, #374151 100%);
			color: #fff;
			box-shadow: 0 4px 16px rgba(107, 114, 128, 0.3),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.btn-filter-secondary:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 8px 24px rgba(107, 114, 128, 0.4),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.btn-filter-danger {
			background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
			color: #fff;
			box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.btn-filter-danger:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 8px 24px rgba(239, 68, 68, 0.4),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		/* Ana ƒ∞√ßerik */
		.stock-main-content {
			flex: 1;
			min-width: 0;
		}
		
		.stock-stats {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			margin-bottom: 30px;
		}
		
		.stat-card {
			background: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(20px);
			-webkit-backdrop-filter: blur(20px);
			padding: 24px;
			border-radius: 16px;
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
			            0 0 0 1px rgba(255, 255, 255, 0.2) inset;
			border: 1.5px solid rgba(255, 255, 255, 0.2);
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		.stat-card:hover {
			transform: translateY(-4px);
			box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15),
			            0 0 0 1px rgba(255, 255, 255, 0.3) inset;
			border-color: rgba(255, 255, 255, 0.4);
		}
		
		.stat-card h3 {
			margin: 0 0 10px 0;
			font-size: 14px;
			color: rgba(255, 255, 255, 0.9);
			font-weight: 500;
			text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
		}
		
		.stat-card .stat-number {
			font-size: 32px;
			font-weight: 700;
			color: #fff;
			text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
		}
		
		.stat-card.stat-green .stat-number {
			color: #10b981;
			text-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
		}
		
		.stat-card.stat-orange .stat-number {
			color: #ff8c00;
			text-shadow: 0 0 8px rgba(255, 255, 255, 0.8),
			            0 0 16px rgba(255, 255, 255, 0.6),
			            0 2px 12px rgba(0, 0, 0, 0.4),
			            0 0 0 2px rgba(255, 255, 255, 0.3);
		}
		
		.stat-card.stat-red .stat-number {
			color: #ef4444;
			text-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
		}
		
		/* √úr√ºn Grid */
		.products-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 25px;
		}
		
		/* Mobil i√ßin 2'li grid */
		@media (max-width: 768px) {
			.stock-header {
				padding: 16px 16px;
			}
			
			.stock-header-content {
				flex-direction: column;
				align-items: flex-start;
				gap: 12px;
			}
			
			.stock-header h1 {
				font-size: 24px;
				gap: 10px;
			}
			
			.stock-header-actions {
				width: 100%;
				flex-wrap: wrap;
				gap: 8px;
			}
			
			#bulkActions {
				padding: 10px 14px;
				gap: 8px;
				flex-wrap: wrap;
			}
			
			#selectedCount {
				font-size: 13px;
				padding: 8px 14px;
			}
			
			.btn-back {
				padding: 10px 16px;
				font-size: 13px;
			}
			
			.btn-admin {
				padding: 10px 14px;
				font-size: 13px;
				min-height: 40px;
			}
			
			.products-grid {
				grid-template-columns: repeat(2, 1fr) !important;
				gap: 12px;
			}
			
			.product-stock-image {
				height: 120px;
			}
			
			.product-stock-body {
				padding: 10px;
			}
			
			.product-stock-title {
				font-size: 12px;
				margin-bottom: 6px;
			}
			
			.product-stock-price {
				font-size: 14px;
			}
			
			.product-stock-stock {
				font-size: 11px;
				padding: 4px 8px;
			}
			
			.product-checkbox-wrapper {
				width: 20px;
				height: 20px;
				top: 8px;
				right: 8px;
			}
			
			.product-checkbox-custom {
				width: 20px;
				height: 20px;
			}
			
			.product-checkbox-custom .checkmark {
				width: 20px;
				height: 20px;
				border-width: 2px;
			}
			
			.stock-value {
				font-size: 24px;
			}
			
			.stock-label {
				font-size: 10px;
				margin-bottom: 4px;
			}
			
			.quantity-input-wrapper {
				padding: 2px;
			}
			
			.quantity-input {
				font-size: 12px;
				padding: 4px 6px;
				width: 50px;
			}
			
			.quantity-btn {
				width: 24px;
				height: 24px;
				font-size: 14px;
			}
			
			.btn-stock-action {
				padding: 10px 12px !important;
				font-size: 12px !important;
				min-height: 40px;
				display: flex !important;
				align-items: center;
				justify-content: center;
				white-space: nowrap;
				overflow: visible;
			}
			
			.stock-action-buttons {
				gap: 8px;
				display: flex !important;
				width: 100%;
			}
			
			.btn-quantity {
				width: 32px;
				height: 32px;
				font-size: 18px;
				flex-shrink: 0;
			}
			
			.quantity-input {
				font-size: 13px;
				padding: 5px 8px;
				width: 50px;
				min-width: 50px;
			}
			
			.quantity-controls {
				display: flex !important;
				width: 100%;
				justify-content: center;
			}
			
			.stock-controls {
				display: flex !important;
				flex-direction: column;
				gap: 10px;
			}
		}
		
		/* √áok k√º√ß√ºk ekranlar i√ßin 2'li (aynƒ± kalƒ±yor) */
		@media (max-width: 480px) {
			.stock-header {
				padding: 12px 12px;
			}
			
			.stock-header h1 {
				font-size: 20px;
				gap: 8px;
			}
			
			.stock-header-actions {
				gap: 6px;
			}
			
			#bulkActions {
				padding: 8px 12px;
				gap: 6px;
			}
			
			#selectedCount {
				font-size: 12px;
				padding: 6px 12px;
			}
			
			.btn-back {
				padding: 8px 12px;
				font-size: 12px;
			}
			
			.btn-admin {
				padding: 8px 12px;
				font-size: 12px;
				min-height: 36px;
			}
			
			.btn-admin span {
				font-size: 14px;
			}
			
			.products-grid {
				grid-template-columns: repeat(2, 1fr) !important;
				gap: 10px;
			}
			
			.product-stock-image {
				height: 120px;
			}
			
			.product-stock-body {
				padding: 10px;
			}
			
			.btn-stock-action {
				padding: 10px 12px !important;
				font-size: 12px !important;
				min-height: 40px;
			}
		}
		
		.product-stock-card {
			background: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(20px);
			-webkit-backdrop-filter: blur(20px);
			border-radius: 16px;
			overflow: hidden;
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
			            0 0 0 1px rgba(255, 255, 255, 0.2) inset;
			border: 1.5px solid rgba(255, 255, 255, 0.2);
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			display: flex;
			flex-direction: column;
			position: relative;
		}
		
		.product-stock-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15),
			            0 0 0 1px rgba(255, 255, 255, 0.3) inset;
			border-color: rgba(255, 255, 255, 0.4);
		}
		
		.product-stock-card.selected {
			border: 2px solid #10b981;
			box-shadow: 0 12px 40px rgba(16, 185, 129, 0.4),
			            0 0 0 1px rgba(16, 185, 129, 0.3) inset;
			transform: scale(1.02);
		}
		
		/* Product Card Checkbox */
		.product-checkbox {
			position: absolute;
			opacity: 0;
			cursor: pointer;
			height: 0;
			width: 0;
		}
		
		.product-checkbox-wrapper {
			position: absolute;
			top: 12px;
			right: 12px;
			z-index: 10;
			width: 28px;
			height: 28px;
		}
		
		.product-checkbox-custom {
			position: relative;
			display: inline-block;
			width: 28px;
			height: 28px;
			cursor: pointer;
		}
		
		.product-checkbox-custom .checkmark {
			position: absolute;
			top: 0;
			left: 0;
			height: 28px;
			width: 28px;
			background: rgba(255, 255, 255, 0.95);
			border: 3px solid #d1d5db;
			border-radius: 8px;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
			backdrop-filter: blur(10px);
		}
		
		.product-checkbox-custom:hover .checkmark {
			border-color: #10b981;
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
		}
		
		.product-checkbox:checked ~ .product-checkbox-custom .checkmark {
			background: linear-gradient(135deg, #10b981 0%, #059669 100%);
			border-color: #10b981;
			box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
			transform: scale(1.1);
		}
		
		.product-checkbox-custom .checkmark:after {
			content: "";
			position: absolute;
			display: none;
			left: 9px;
			top: 5px;
			width: 6px;
			height: 12px;
			border: solid white;
			border-width: 0 3px 3px 0;
			transform: rotate(45deg);
		}
		
		.product-checkbox:checked ~ .product-checkbox-custom .checkmark:after {
			display: block;
		}
		
		.product-stock-image {
			width: 100%;
			height: 200px;
			object-fit: cover;
			background: #f3f4f6;
		}
		
		.product-stock-body {
			padding: 20px;
			flex: 1;
			display: flex;
			flex-direction: column;
		}
		
		.product-stock-title {
			margin: 0 0 8px 0;
			font-size: 16px;
			font-weight: 600;
			color: #fff;
			line-height: 1.4;
			text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
		}
		
		.product-stock-sku {
			margin: 0 0 15px 0;
			font-size: 12px;
			color: rgba(255, 255, 255, 0.8);
		}
		
		.product-stock-current {
			margin: auto 0 15px 0;
			text-align: center;
		}
		
		.stock-label {
			font-size: 12px;
			color: rgba(255, 255, 255, 0.9);
			margin-bottom: 8px;
			font-weight: 500;
			text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
		}
		
		.stock-value {
			font-size: 42px;
			font-weight: 700;
			margin: 0;
			line-height: 1;
			text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
		}
		
		.stock-value.stock-high {
			color: #10b981;
		}
		
		.stock-value.stock-low {
			color: #ff8c00;
			text-shadow: 0 0 8px rgba(255, 255, 255, 0.8),
			            0 0 16px rgba(255, 255, 255, 0.6),
			            0 2px 12px rgba(0, 0, 0, 0.4),
			            0 0 0 2px rgba(255, 255, 255, 0.3);
			font-weight: 800;
		}
		
		.stock-value.stock-zero {
			color: #ef4444;
		}
		
		.stock-controls {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 12px;
			margin-top: 15px;
		}
		
		.quantity-controls {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 10px;
			width: 100%;
		}
		
		.quantity-input-wrapper {
			display: flex;
			align-items: center;
			gap: 8px;
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			border-radius: 12px;
			padding: 4px;
			border: 1px solid rgba(255, 255, 255, 0.2);
		}
		
		.btn-quantity {
			width: 36px;
			height: 36px;
			border: none;
			border-radius: 10px;
			font-size: 20px;
			font-weight: 700;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			display: flex;
			align-items: center;
			justify-content: center;
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			color: #fff;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
			border: 1px solid rgba(255, 255, 255, 0.3);
		}
		
		.btn-quantity:hover {
			background: rgba(16, 185, 129, 0.3);
			color: #fff;
			box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
			border-color: rgba(16, 185, 129, 0.5);
			transform: scale(1.1);
		}
		
		.btn-quantity:active {
			transform: scale(0.95);
		}
		
		.quantity-input {
			width: 60px;
			height: 36px;
			border: 2px solid rgba(255, 255, 255, 0.2);
			border-radius: 10px;
			text-align: center;
			font-size: 16px;
			font-weight: 600;
			color: #1a1a1a;
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			padding: 0;
			-moz-appearance: textfield;
			appearance: textfield;
		}
		
		.quantity-input::-webkit-outer-spin-button,
		.quantity-input::-webkit-inner-spin-button {
			-webkit-appearance: none;
			appearance: none;
			margin: 0;
		}
		
		.quantity-input:focus {
			outline: none;
			border-color: #10b981;
			box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1),
			           0 4px 16px rgba(16, 185, 129, 0.15);
			background: rgba(255, 255, 255, 1);
		}
		
		.stock-action-buttons {
			display: flex;
			gap: 10px;
			width: 100%;
		}
		
		.btn-stock-action {
			flex: 1;
			padding: 12px 20px;
			border: none;
			border-radius: 12px;
			font-size: 14px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
			position: relative;
			overflow: hidden;
		}
		
		.btn-stock-action::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
			transition: left 0.5s ease;
		}
		
		.btn-stock-action:hover::before {
			left: 100%;
		}
		
		.btn-stock-action:active {
			transform: scale(0.98);
		}
		
		.btn-stock-add {
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
		}
		
		.btn-stock-add:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 12px 32px rgba(16, 185, 129, 0.4),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.btn-stock-remove {
			background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
			color: #fff;
		}
		
		.btn-stock-remove:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 12px 32px rgba(239, 68, 68, 0.4),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.btn-stock-action:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}
		
		
		/* Mobil Uyumluluk */
		@media (max-width: 768px) {
			.stock-container {
				flex-direction: column;
				padding: 20px 15px;
			}
			
			.stock-sidebar {
				width: 85%;
				max-width: 400px;
				position: fixed;
				top: 0;
				left: -100%;
				right: auto;
				bottom: 0;
				height: 100vh;
				max-height: 100vh;
				display: block;
				z-index: 1000;
				overflow-y: auto;
				border-radius: 0;
				padding: 20px;
				transition: left 0.3s ease-in-out;
				box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
			}
			
			.stock-sidebar.mobile-open {
				left: 0;
			}
			
			/* Mobil sidebar i√ßin body scroll'u engelle */
			body.sidebar-open {
				overflow: hidden;
			}
			
			/* Sidebar overlay */
			body.sidebar-open::before {
				content: '';
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.5);
				z-index: 999;
				backdrop-filter: blur(2px);
			}
			
			.sidebar-toggle {
				display: block !important;
			}
			
			#mobileSidebarToggle {
				display: block !important;
			}
			
			.stock-header {
				padding: 16px 20px;
			}
			
			.stock-header h1 {
				font-size: 22px;
			}
			
			.stock-header-actions {
				gap: 8px;
			}
			
			#bulkActions {
				padding: 10px 14px;
				gap: 8px;
			}
			
			.btn-admin {
				padding: 8px 14px;
				font-size: 12px;
			}
			
			#selectedCount {
				font-size: 13px;
				padding: 6px 12px;
			}
			
			.products-grid {
				grid-template-columns: repeat(2, 1fr) !important;
				gap: 12px;
			}
			
			.stock-stats {
				grid-template-columns: 1fr;
			}
			
		}
		
		/* Loading */
		.loading {
			text-align: center;
			padding: 60px 20px;
			color: rgba(255, 255, 255, 0.9);
		}
		
		.empty-state {
			text-align: center;
			padding: 60px 20px;
			color: rgba(255, 255, 255, 0.9);
		}
		
		.empty-state h3 {
			font-size: 20px;
			margin-bottom: 10px;
			color: #fff;
			text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
		}
		
		.empty-state p {
			color: rgba(255, 255, 255, 0.8);
		}
		
		/* Modern Popup Modal */
		.popup-modal-overlay {
			position: fixed !important;
			top: 0 !important;
			left: 0 !important;
			right: 0 !important;
			bottom: 0 !important;
			background: rgba(0, 0, 0, 0.6);
			backdrop-filter: blur(4px);
			z-index: 99999 !important;
			display: none;
			align-items: center;
			justify-content: center;
			padding: 20px;
			animation: fadeIn 0.2s ease-out;
		}
		
		.popup-modal-overlay.show {
			display: flex;
		}
		
		@keyframes fadeIn {
			from {
				opacity: 0;
			}
			to {
				opacity: 1;
			}
		}
		
		.popup-modal {
			background: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(24px);
			-webkit-backdrop-filter: blur(24px);
			border-radius: 24px;
			width: 100%;
			max-width: 450px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3),
			            0 0 0 1px rgba(255, 255, 255, 0.2) inset;
			border: 1.5px solid rgba(255, 255, 255, 0.2);
			overflow: hidden;
			animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			transform-origin: center;
			position: relative;
			margin: auto;
		}
		
		@keyframes slideUp {
			from {
				transform: translateY(30px) scale(0.95);
				opacity: 0;
			}
			to {
				transform: translateY(0) scale(1);
				opacity: 1;
			}
		}
		
		.popup-modal-header {
			padding: 24px 30px 20px;
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 15px;
			position: relative;
			overflow: hidden;
		}
		
		.popup-modal-header::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 2px;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
		}
		
		.popup-modal-header h3 {
			margin: 0;
			font-size: 20px;
			font-weight: 700;
			display: flex;
			align-items: center;
			gap: 10px;
			text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
		}
		
		.popup-modal-header .popup-icon {
			font-size: 24px;
			width: 36px;
			height: 36px;
			display: flex;
			align-items: center;
			justify-content: center;
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			border-radius: 10px;
			border: 1px solid rgba(255, 255, 255, 0.3);
		}
		
		.popup-modal-body {
			padding: 30px;
			color: #fff;
			font-size: 15px;
			line-height: 1.6;
			background: rgba(255, 255, 255, 0.1);
		}
		
		.popup-modal-body p {
			margin: 0 0 15px 0;
			color: #fff;
		}
		
		.popup-modal-body strong {
			color: rgba(255, 255, 255, 0.9);
			font-weight: 600;
		}
		
		.popup-modal-footer {
			padding: 20px 30px;
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			display: flex;
			justify-content: flex-end;
			gap: 12px;
			border-top: 1px solid rgba(255, 255, 255, 0.2);
		}
		
		.popup-btn {
			padding: 12px 24px;
			border: none;
			border-radius: 12px;
			font-size: 15px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			min-width: 100px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			position: relative;
			overflow: hidden;
		}
		
		.popup-btn::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
			transition: left 0.5s ease;
		}
		
		.popup-btn:hover::before {
			left: 100%;
		}
		
		.popup-btn-primary {
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
			box-shadow: 0 8px 24px rgba(16, 185, 129, 0.35),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.popup-btn-primary:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 12px 32px rgba(16, 185, 129, 0.45),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.popup-btn-secondary {
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			color: #fff;
			border: 1.5px solid rgba(255, 255, 255, 0.3);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.popup-btn-secondary:hover {
			background: rgba(255, 255, 255, 0.3);
			border-color: rgba(255, 255, 255, 0.5);
			transform: translateY(-2px) scale(1.02);
		}
		
		.popup-btn-danger {
			background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
			color: #fff;
			box-shadow: 0 8px 24px rgba(239, 68, 68, 0.35),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.popup-btn-danger:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 12px 32px rgba(239, 68, 68, 0.45),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		.popup-btn-success {
			background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
			color: #fff;
			box-shadow: 0 8px 24px rgba(16, 185, 129, 0.35),
			            inset 0 1px 0 rgba(255, 255, 255, 0.2);
		}
		
		.popup-btn-success:hover {
			transform: translateY(-2px) scale(1.02);
			box-shadow: 0 12px 32px rgba(16, 185, 129, 0.45),
			            inset 0 1px 0 rgba(255, 255, 255, 0.3);
		}
		
		@media (max-width: 768px) {
			.popup-modal {
				max-width: 90%;
				margin: 20px;
			}
			
			.popup-modal-header {
				padding: 20px 24px 16px;
			}
			
			.popup-modal-header h3 {
				font-size: 18px;
			}
			
			.popup-modal-body {
				padding: 24px;
				font-size: 14px;
			}
			
			.popup-modal-footer {
				padding: 16px 24px;
				flex-direction: column-reverse;
			}
			
			.popup-btn {
				width: 100%;
			}
		}
	</style>
</head>
<body>
	<!-- ≈ûifre Giri≈ü Ekranƒ± -->
	<div id="loginScreen" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #10b981 0%, #059669 25%, #047857 50%, #065f46 75%, #064e3b 100%); background-size: 400% 400%; animation: gradientShift 15s ease infinite; z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;">
		<div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); padding: 50px 40px; border-radius: 24px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.2) inset; max-width: 450px; width: 100%; border: 1.5px solid rgba(255, 255, 255, 0.2); position: relative; overflow: hidden;">
			<div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #10b981, #059669, #047857);"></div>
			<h2 style="margin: 0 0 30px 0; text-align: center; color: #fff; font-size: 28px; font-weight: 700; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);">üîí Stok Y√∂netimi</h2>
			<div class="alert alert-error" id="loginError" style="display: none; margin-bottom: 20px; padding: 15px 20px; border-radius: 12px; background: rgba(254, 226, 226, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); color: #991b1b; border: 1.5px solid rgba(239, 68, 68, 0.3); box-shadow: 0 4px 16px rgba(239, 68, 68, 0.15);"></div>
			<div style="margin-bottom:20px;">
				<label style="display: block; margin-bottom: 10px; font-weight: 600; color: rgba(255, 255, 255, 0.95); font-size: 14px;">≈ûifre</label>
				<input type="password" id="adminPassword" placeholder="Admin ≈üifresini gir..." style="width: 100%; padding: 14px 18px; border: 2px solid rgba(255, 255, 255, 0.2); border-radius: 12px; font-size: 16px; background: rgba(255, 255, 255, 1); color: #1a1a1a; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); outline: none; transition: all 0.3s;">
			</div>
			<style>
				#adminPassword::placeholder {
					color: rgba(107, 114, 128, 0.6) !important;
				}
				#adminPassword:focus {
					border-color: #10b981 !important;
					box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1), 0 4px 16px rgba(16, 185, 129, 0.15) !important;
					background: rgba(255, 255, 255, 1) !important;
				}
			</style>
			<button onclick="checkPassword()" class="btn-admin" style="width: 100%; margin-top: 20px; padding: 16px 30px; font-size: 16px; background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);">Giri≈ü Yap</button>
		</div>
	</div>

	<div id="pageContent" style="display: none;">
	<!-- Modern Popup Modal -->
	<div id="popupModal" class="popup-modal-overlay">
		<div class="popup-modal">
			<div class="popup-modal-header">
				<h3>
					<span class="popup-icon" id="popupIcon">‚Ñπ</span>
					<span id="popupTitle">Bilgi</span>
				</h3>
			</div>
			<div class="popup-modal-body">
				<p id="popupMessage"></p>
			</div>
			<div class="popup-modal-footer" id="popupFooter">
				<!-- Butonlar JavaScript ile eklenecek -->
			</div>
		</div>
	</div>
	
	<!-- Header -->
	<div class="stock-header">
		<div class="stock-header-content">
			<h1>
				üì¶ Stok Y√∂netimi
			</h1>
			<div class="stock-header-actions">
			<div id="bulkActions" class="bulk-actions-container">
				<span id="selectedCount">0 √ºr√ºn se√ßili</span>
				<button class="btn-admin btn-bulk-remove" onclick="bulkRemoveStock()">
					<span style="font-size: 16px;">‚ûñ</span> Toplu √áƒ±kar
				</button>
				<button class="btn-admin btn-bulk-add" onclick="bulkAddStock()">
					<span style="font-size: 16px;">‚ûï</span> Toplu Ekle
				</button>
				<button class="btn-admin btn-bulk-clear" onclick="clearSelection()">
					<span style="font-size: 16px;">‚úï</span> Temizle
				</button>
				<button class="btn-admin" onclick="addToVehicleStock()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
					<span style="font-size: 16px;">üöö</span> Ara√ß Stoƒüuna Ekle
				</button>
			</div>
			<a href="vehicle-stock.html" class="btn-back" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-color: rgba(255, 255, 255, 0.3);">
				<span style="font-size: 16px;">üöö</span> Ara√ß Stoƒüu
			</a>
			<a href="admin.html" class="btn-back">‚Üê Admin Paneli</a>
		</div>
		</div>
	</div>
	
	<!-- Main Container -->
	<div class="stock-container">
		<!-- Sol Panel -->
		<aside class="stock-sidebar" id="stockSidebar">
			<div class="stock-sidebar-header">
				<h2>üîç Filtreler</h2>
				<button class="sidebar-toggle" id="sidebarToggle" type="button">‚úï</button>
			</div>
			
			<!-- Toplam Stok -->
			<div class="total-stock-box">
				<h3>Toplam Depo Stoku</h3>
				<p class="stock-number" id="totalStockDisplay">0</p>
			</div>
			
			<!-- Ana Kategori Filtresi -->
			<div class="filter-section">
				<h3>Ana Kategoriler</h3>
				<div class="filter-checkbox-container" id="mainCategoryFilters">
					<p class="loading">Y√ºkleniyor...</p>
				</div>
				<div class="filter-actions">
					<button class="btn-filter btn-filter-primary" id="selectAllMain">T√ºm√ºn√º Se√ß</button>
					<button class="btn-filter btn-filter-secondary" id="deselectAllMain">Temizle</button>
				</div>
			</div>
			
			<!-- Alt Kategori Filtresi -->
			<div class="filter-section">
				<h3>Alt Kategoriler</h3>
				<div class="filter-checkbox-container" id="subCategoryFilters">
					<p style="color: #6b7280; text-align: center; padding: 20px;">Ana kategori se√ßin</p>
				</div>
				<div class="filter-actions">
					<button class="btn-filter btn-filter-primary" id="selectAllSub">T√ºm√ºn√º Se√ß</button>
					<button class="btn-filter btn-filter-secondary" id="deselectAllSub">Temizle</button>
				</div>
			</div>
			
			<!-- Filtre Temizle -->
			<button class="btn-filter btn-filter-danger" id="resetFilters" style="width: 100%; margin-top: 20px;">Filtreleri Temizle</button>
		</aside>
		
		<!-- Ana ƒ∞√ßerik -->
		<main class="stock-main-content">
			<!-- Mobil Sidebar Toggle -->
			<button class="sidebar-toggle" id="mobileSidebarToggle" type="button" style="margin-bottom: 20px; width: 100%;">‚ò∞ Filtreleri A√ß</button>
			
			<!-- ƒ∞statistikler -->
			<div class="stock-stats">
				<div class="stat-card stat-green">
					<h3>Stokta Var</h3>
					<p class="stat-number" id="inStockCount">0</p>
				</div>
				<div class="stat-card stat-orange">
					<h3>Az Stok (< 10)</h3>
					<p class="stat-number" id="lowStockCount">0</p>
				</div>
				<div class="stat-card stat-red">
					<h3>Stokta Yok</h3>
					<p class="stat-number" id="outOfStockCount">0</p>
				</div>
			</div>
			
			<!-- √úr√ºn Grid -->
			<div class="products-grid" id="productsGrid">
				<div class="loading">Y√ºkleniyor...</div>
			</div>
		</main>
	</div>
	
	<script src="js/jquery.min.js"></script>
	<script src="js/data-products.js"></script>
	<script>
		// Global deƒüi≈ükenler
		var productsData = [];
		var filteredProducts = [];
		var selectedMainCategories = [];
		var selectedSubCategories = [];
		
		// Sayfa y√ºklendiƒüinde - ≈üifre kontrol√ºnden sonra √ßalƒ±≈üacak
		function initStockPage() {
			loadProducts();
			setupEventListeners();
			checkMobileView();
			
			$(window).resize(function() {
				checkMobileView();
			});
		}
		
		// Mobil g√∂r√ºn√ºm kontrol√º
		function checkMobileView() {
			if ($(window).width() <= 768) {
				$('#mobileSidebarToggle').css('display', 'block');
			} else {
				$('#mobileSidebarToggle').css('display', 'none');
				$('#stockSidebar').removeClass('mobile-open');
			}
		}
		
		// Event listener'larƒ± kur
		function setupEventListeners() {
			// Mobil sidebar toggle - √∂nceki event listener'larƒ± kaldƒ±r
			$('#mobileSidebarToggle').off('click').on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				var isOpen = $('#stockSidebar').hasClass('mobile-open');
				if (isOpen) {
					$('#stockSidebar').removeClass('mobile-open');
					$('body').removeClass('sidebar-open');
				} else {
					$('#stockSidebar').addClass('mobile-open');
					$('body').addClass('sidebar-open');
				}
			});
			
			$('#sidebarToggle').off('click').on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				$('#stockSidebar').removeClass('mobile-open');
				$('body').removeClass('sidebar-open');
			});
			
			// Sidebar dƒ±≈üƒ±na tƒ±klayƒ±nca kapat (mobilde)
			$(document).off('click.sidebar').on('click.sidebar', function(e) {
				if ($(window).width() <= 768) {
					if ($('#stockSidebar').hasClass('mobile-open')) {
						if (!$(e.target).closest('#stockSidebar').length && 
							!$(e.target).closest('#mobileSidebarToggle').length &&
							!$(e.target).is('#mobileSidebarToggle')) {
							$('#stockSidebar').removeClass('mobile-open');
							$('body').removeClass('sidebar-open');
						}
					}
				}
			});
			
			// Filtre butonlarƒ±
			$('#selectAllMain').on('click', function() {
				$('#mainCategoryFilters input[type="checkbox"]').prop('checked', true).trigger('change');
			});
			
			$('#deselectAllMain').on('click', function() {
				$('#mainCategoryFilters input[type="checkbox"]').prop('checked', false).trigger('change');
			});
			
			$('#selectAllSub').on('click', function() {
				$('#subCategoryFilters input[type="checkbox"]').prop('checked', true).trigger('change');
			});
			
			$('#deselectAllSub').on('click', function() {
				$('#subCategoryFilters input[type="checkbox"]').prop('checked', false).trigger('change');
			});
			
			$('#resetFilters').on('click', function() {
				$('#mainCategoryFilters input[type="checkbox"]').prop('checked', false);
				$('#subCategoryFilters input[type="checkbox"]').prop('checked', false);
				selectedMainCategories = [];
				selectedSubCategories = [];
				populateSubCategories();
				renderProducts();
			});
			
			// Ana kategori checkbox deƒüi≈üiklikleri
			$(document).on('change', '#mainCategoryFilters input[type="checkbox"]', function() {
				var category = $(this).val();
				if ($(this).is(':checked')) {
					if (selectedMainCategories.indexOf(category) === -1) {
						selectedMainCategories.push(category);
					}
				} else {
					selectedMainCategories = selectedMainCategories.filter(c => c !== category);
				}
				populateSubCategories();
				renderProducts();
			});
			
			// Alt kategori checkbox deƒüi≈üiklikleri
			$(document).on('change', '#subCategoryFilters input[type="checkbox"]', function() {
				var category = $(this).val();
				if ($(this).is(':checked')) {
					if (selectedSubCategories.indexOf(category) === -1) {
						selectedSubCategories.push(category);
					}
				} else {
					selectedSubCategories = selectedSubCategories.filter(c => c !== category);
				}
				renderProducts();
			});
		}
		
		// √úr√ºnleri y√ºkle
		function loadProducts() {
			$.ajax({
				url: '/api/products',
				method: 'GET',
				success: function(data) {
					if (data.products && data.products.length > 0) {
						productsData = data.products;
						populateMainCategories();
						populateSubCategories();
						renderProducts();
					} else {
						$('#productsGrid').html('<div class="empty-state"><h3>√úr√ºn bulunamadƒ±</h3><p>Hen√ºz √ºr√ºn eklenmemi≈ü.</p></div>');
					}
				},
				error: function(xhr, status, error) {
					console.error('loadProducts: API hatasƒ±', status, error);
					$('#productsGrid').html('<div class="empty-state"><h3 style="color: #ef4444;">‚ö†Ô∏è √úr√ºnler y√ºklenemedi</h3><p>Sunucu √ßalƒ±≈ümƒ±yor olabilir.</p></div>');
				}
			});
		}
		
		// localStorage kullanƒ±mƒ± kaldƒ±rƒ±ldƒ± - artƒ±k sadece backend kullanƒ±lƒ±yor
		
		// Ana kategorileri doldur
		function populateMainCategories() {
			var mainCats = {};
			productsData.forEach(function(product) {
				var mainCat = typeof product.mainCategory === 'object' ? product.mainCategory.tr : product.mainCategory;
				if (mainCat && !mainCats[mainCat]) {
					mainCats[mainCat] = true;
				}
			});
			
			var html = '';
			Object.keys(mainCats).sort().forEach(function(cat) {
				var catId = 'main_' + escapeHtml(cat).replace(/[^a-zA-Z0-9]/g, '_');
				html += '<div class="filter-checkbox-item">';
				html += '<input type="checkbox" id="' + catId + '" value="' + escapeHtml(cat) + '">';
				html += '<label for="' + catId + '" class="checkbox-custom"><span class="checkmark"></span></label>';
				html += '<label for="' + catId + '">' + escapeHtml(cat) + '</label>';
				html += '</div>';
			});
			
			if (html === '') {
				html = '<p style="color: #6b7280; text-align: center; padding: 20px;">Kategori bulunamadƒ±</p>';
			}
			
			$('#mainCategoryFilters').html(html);
			
			// filter-checkbox-item'a tƒ±klanƒ±nca checkbox'ƒ± toggle et
			$(document).off('click', '#mainCategoryFilters .filter-checkbox-item').on('click', '#mainCategoryFilters .filter-checkbox-item', function(e) {
				// Eƒüer tƒ±klama doƒürudan input veya label √ºzerindeyse, hi√ßbir ≈üey yapma
				// (label'ƒ±n for attribute'u zaten checkbox'ƒ± toggle edecek)
				if ($(e.target).is('input[type="checkbox"]') || $(e.target).is('label') || $(e.target).closest('label').length > 0) {
					return;
				}
				// Bo≈ü alana (container'a) tƒ±klanƒ±rsa, checkbox'ƒ± toggle et
				var $checkbox = $(this).find('input[type="checkbox"]');
				$checkbox.prop('checked', !$checkbox.prop('checked'));
				$checkbox.trigger('change');
			});
		}
		
		// Alt kategorileri doldur
		function populateSubCategories() {
			if (selectedMainCategories.length === 0) {
				$('#subCategoryFilters').html('<p style="color: #6b7280; text-align: center; padding: 20px;">Ana kategori se√ßin</p>');
				return;
			}
			
			var subCats = {};
			productsData.forEach(function(product) {
				var mainCat = typeof product.mainCategory === 'object' ? product.mainCategory.tr : product.mainCategory;
				if (selectedMainCategories.indexOf(mainCat) !== -1) {
					var subCat = typeof product.category === 'object' ? product.category.tr : product.category;
					if (subCat && !subCats[subCat]) {
						subCats[subCat] = true;
					}
				}
			});
			
			var html = '';
			Object.keys(subCats).sort().forEach(function(cat) {
				var catId = 'sub_' + escapeHtml(cat).replace(/[^a-zA-Z0-9]/g, '_');
				html += '<div class="filter-checkbox-item">';
				html += '<input type="checkbox" id="' + catId + '" value="' + escapeHtml(cat) + '">';
				html += '<label for="' + catId + '" class="checkbox-custom"><span class="checkmark"></span></label>';
				html += '<label for="' + catId + '">' + escapeHtml(cat) + '</label>';
				html += '</div>';
			});
			
			if (html === '') {
				html = '<p style="color: #6b7280; text-align: center; padding: 20px;">Alt kategori bulunamadƒ±</p>';
			}
			
			$('#subCategoryFilters').html(html);
			
			// filter-checkbox-item'a tƒ±klanƒ±nca checkbox'ƒ± toggle et
			$(document).off('click', '#subCategoryFilters .filter-checkbox-item').on('click', '#subCategoryFilters .filter-checkbox-item', function(e) {
				// Eƒüer tƒ±klama doƒürudan input veya label √ºzerindeyse, hi√ßbir ≈üey yapma
				// (label'ƒ±n for attribute'u zaten checkbox'ƒ± toggle edecek)
				if ($(e.target).is('input[type="checkbox"]') || $(e.target).is('label') || $(e.target).closest('label').length > 0) {
					return;
				}
				// Bo≈ü alana (container'a) tƒ±klanƒ±rsa, checkbox'ƒ± toggle et
				var $checkbox = $(this).find('input[type="checkbox"]');
				$checkbox.prop('checked', !$checkbox.prop('checked'));
				$checkbox.trigger('change');
			});
			
			// Se√ßili alt kategorileri geri y√ºkle
			selectedSubCategories.forEach(function(cat) {
				$('#subCategoryFilters input[value="' + escapeHtml(cat) + '"]').prop('checked', true);
			});
		}
		
		// √úr√ºnleri render et
		function renderProducts() {
			// Filtrele
			filteredProducts = productsData.filter(function(product) {
				var mainCat = typeof product.mainCategory === 'object' ? product.mainCategory.tr : product.mainCategory;
				var subCat = typeof product.category === 'object' ? product.category.tr : product.category;
				
				if (selectedMainCategories.length > 0 && selectedMainCategories.indexOf(mainCat) === -1) {
					return false;
				}
				
				if (selectedSubCategories.length > 0 && selectedSubCategories.indexOf(subCat) === -1) {
					return false;
				}
				
				return true;
			});
			
			// ƒ∞statistikleri hesapla
			var inStock = 0;
			var lowStock = 0;
			var outOfStock = 0;
			var totalStock = 0;
			
			filteredProducts.forEach(function(product) {
				var stock = parseInt(product.stock) || 0;
				totalStock += stock;
				if (stock > 10) {
					inStock++;
				} else if (stock > 0) {
					lowStock++;
				} else {
					outOfStock++;
				}
			});
			
			$('#inStockCount').text(inStock);
			$('#lowStockCount').text(lowStock);
			$('#outOfStockCount').text(outOfStock);
			$('#totalStockDisplay').text(totalStock);
			
			// √úr√ºn kartlarƒ±nƒ± render et
			if (filteredProducts.length === 0) {
				$('#productsGrid').html('<div class="empty-state"><h3>√úr√ºn bulunamadƒ±</h3><p>Se√ßilen filtrelerle e≈üle≈üen √ºr√ºn yok.</p></div>');
				return;
			}
			
			var html = '';
			filteredProducts.forEach(function(product, index) {
				var title = typeof product.title === 'object' ? product.title.tr : product.title;
				var sku = product.sku || '-';
				var stock = parseInt(product.stock) || 0;
				var image = product.image || (product.images && product.images[0]) || '';
				
				var stockClass = 'stock-high';
				if (stock === 0) {
					stockClass = 'stock-zero';
				} else if (stock < 10) {
					stockClass = 'stock-low';
				}
				
			html += '<div class="product-stock-card" data-index="' + index + '">';
			html += '<div class="product-checkbox-wrapper">';
			html += '<input type="checkbox" class="product-checkbox" id="product-checkbox-' + index + '" data-index="' + index + '" onchange="updateSelection()">';
			html += '<label for="product-checkbox-' + index + '" class="product-checkbox-custom">';
			html += '<span class="checkmark"></span>';
			html += '</label>';
			html += '</div>';
			if (image) {
				html += '<img src="' + escapeHtml(image) + '" alt="' + escapeHtml(title) + '" class="product-stock-image">';
			} else {
				html += '<div class="product-stock-image" style="background: #f3f4f6; display: flex; align-items: center; justify-content: center; color: #9ca3af; font-size: 14px;">Resim Yok</div>';
			}
			html += '<div class="product-stock-body">';
				html += '<h3 class="product-stock-title">' + escapeHtml(title) + '</h3>';
				html += '<p class="product-stock-sku">SKU: ' + escapeHtml(sku) + '</p>';
				html += '<div class="product-stock-current">';
				html += '<div class="stock-label">Mevcut Stok</div>';
				html += '<p class="stock-value ' + stockClass + '">' + stock + '</p>';
				html += '</div>';
				html += '<div class="stock-controls">';
				html += '<div class="quantity-controls">';
				html += '<button class="btn-quantity" onclick="changeQuantity(' + index + ', -1)">‚àí</button>';
				html += '<input type="number" id="quantity-' + index + '" class="quantity-input" value="1" min="1" onchange="validateQuantity(' + index + ')">';
				html += '<button class="btn-quantity" onclick="changeQuantity(' + index + ', 1)">+</button>';
				html += '</div>';
				html += '<div class="stock-action-buttons">';
				html += '<button class="btn-stock-action btn-stock-remove" onclick="removeStock(' + index + ')">‚ûñ √áƒ±kar</button>';
				html += '<button class="btn-stock-action btn-stock-add" onclick="addStock(' + index + ')">‚ûï Ekle</button>';
				html += '</div>';
				html += '</div>';
				html += '</div>';
				html += '</div>';
			});
			
			$('#productsGrid').html(html);
		}
		
		// Se√ßili √ºr√ºnleri y√∂net
		function updateSelection() {
			var selected = [];
			$('.product-checkbox:checked').each(function() {
				selected.push(parseInt($(this).data('index')));
			});
			
			// Se√ßili √ºr√ºn kartlarƒ±na 'selected' class ekle
			$('.product-stock-card').removeClass('selected');
			selected.forEach(function(index) {
				$('.product-stock-card[data-index="' + index + '"]').addClass('selected');
			});
			
			// Toplu i≈ülem butonlarƒ±nƒ± g√∂ster/gizle
			if (selected.length > 0) {
				$('#bulkActions').addClass('show');
				$('#selectedCount').text(selected.length + ' √ºr√ºn se√ßili');
			} else {
				$('#bulkActions').removeClass('show');
			}
		}
		
		// Se√ßimi temizle
		function clearSelection() {
			$('.product-checkbox').prop('checked', false);
			$('.product-stock-card').removeClass('selected');
			$('#bulkActions').removeClass('show');
		}
		
		// Se√ßili √ºr√ºnleri ara√ß stoƒüuna ekle
		function addToVehicleStock() {
			var selectedProducts = [];
			$('.product-checkbox:checked').each(function() {
				var index = parseInt($(this).data('index'));
				var product = filteredProducts[index];
				if (product) {
					// SKU varsa SKU kullan, yoksa title kullan
					var identifier = product.sku || (typeof product.title === 'object' ? product.title.tr : product.title);
					var title = typeof product.title === 'object' ? product.title.tr : product.title;
					var currentStock = parseInt(product.stock) || 0;
					if (identifier) {
						selectedProducts.push({
							index: index,
							identifier: identifier,
							title: title,
							currentStock: currentStock
						});
					}
				}
			});
			
			if (selectedProducts.length === 0) {
				showAlert('warning', 'L√ºtfen en az bir √ºr√ºn se√ßin!');
				return;
			}
			
			// Miktar giri≈üi i√ßin modal g√∂ster
			showVehicleStockQuantityModal(selectedProducts);
		}
		
		// Ara√ß stoƒüuna ekleme i√ßin miktar modal'ƒ±
		function showVehicleStockQuantityModal(products) {
			var html = '<div class="popup-modal-overlay show" id="vehicleStockModal">';
			html += '<div class="popup-modal" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">';
			html += '<div class="popup-modal-header">';
			html += '<h3>Ara√ß Stoƒüuna Ekle</h3>';
			html += '<button class="popup-modal-close" onclick="closeVehicleStockModal()">√ó</button>';
			html += '</div>';
			html += '<div class="popup-modal-body">';
			html += '<p style="color: rgba(255, 255, 255, 0.9); margin-bottom: 20px;">Her √ºr√ºn i√ßin eklemek istediƒüiniz miktarƒ± girin:</p>';
			
			products.forEach(function(product, idx) {
				html += '<div style="margin-bottom: 20px; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.2);">';
				html += '<div style="margin-bottom: 10px;">';
				html += '<strong style="color: #fff; display: block; margin-bottom: 5px;">' + escapeHtml(product.title) + '</strong>';
				html += '<span style="color: rgba(255, 255, 255, 0.8); font-size: 13px;">Mevcut Stok: ' + product.currentStock + '</span>';
				html += '</div>';
				html += '<div style="display: flex; align-items: center; gap: 10px;">';
				html += '<label style="color: rgba(255, 255, 255, 0.9); margin-right: 10px;">Miktar:</label>';
				html += '<button class="btn-quantity" onclick="changeVehicleQuantity(' + idx + ', -1)" style="width: 35px; height: 35px;">‚àí</button>';
				html += '<input type="number" id="vehicle-quantity-' + idx + '" class="quantity-input" value="1" min="1" max="' + product.currentStock + '" onchange="validateVehicleQuantity(' + idx + ', ' + product.currentStock + ')" style="width: 80px; text-align: center;">';
				html += '<button class="btn-quantity" onclick="changeVehicleQuantity(' + idx + ', 1, ' + product.currentStock + ')" style="width: 35px; height: 35px;">+</button>';
				html += '<span style="color: rgba(255, 255, 255, 0.7); font-size: 12px; margin-left: auto;">Max: ' + product.currentStock + '</span>';
				html += '</div>';
				html += '</div>';
			});
			
			html += '</div>';
			html += '<div class="popup-modal-footer">';
			html += '<button class="popup-btn popup-btn-secondary" onclick="closeVehicleStockModal()">ƒ∞ptal</button>';
			html += '<button class="popup-btn popup-btn-primary" onclick="confirmAddToVehicleStock()">Ekle</button>';
			html += '</div>';
			html += '</div>';
			html += '</div>';
			
			$('body').append(html);
			
			// Products verisini window objesine g√ºvenli ≈üekilde ekle
			window.vehicleStockProducts = products;
		}
		
		// Vehicle quantity deƒüi≈ütir
		function changeVehicleQuantity(index, change, maxStock) {
			var $input = $('#vehicle-quantity-' + index);
			var currentValue = parseInt($input.val()) || 1;
			var newValue = currentValue + change;
			
			if (newValue < 1) {
				newValue = 1;
			}
			if (maxStock !== undefined && newValue > maxStock) {
				newValue = maxStock;
			}
			
			$input.val(newValue);
		}
		
		// Vehicle quantity doƒürula
		function validateVehicleQuantity(index, maxStock) {
			var $input = $('#vehicle-quantity-' + index);
			var value = parseInt($input.val()) || 1;
			
			if (value < 1) {
				value = 1;
				$input.val(value);
			}
			if (value > maxStock) {
				value = maxStock;
				$input.val(value);
				showAlert('warning', 'Miktar mevcut stoktan fazla olamaz!');
			}
		}
		
		// Vehicle stock modal'ƒ± kapat
		function closeVehicleStockModal() {
			$('#vehicleStockModal').remove();
		}
		
		// Ara√ß stoƒüuna eklemeyi onayla
		function confirmAddToVehicleStock() {
			if (!window.vehicleStockProducts) {
				showAlert('error', '√úr√ºn bilgileri bulunamadƒ±!');
				return;
			}
			
			var products = window.vehicleStockProducts;
			var items = [];
			var hasError = false;
			
			products.forEach(function(product, idx) {
				var quantity = parseInt($('#vehicle-quantity-' + idx).val()) || 0;
				
				if (quantity <= 0) {
					showAlert('error', product.title + ' i√ßin ge√ßerli bir miktar girin!');
					hasError = true;
					return;
				}
				
				if (quantity > product.currentStock) {
					showAlert('error', product.title + ' i√ßin miktar mevcut stoktan fazla olamaz!');
					hasError = true;
					return;
				}
				
				items.push({
					identifier: product.identifier,
					quantity: quantity
				});
			});
			
			if (hasError) {
				return;
			}
			
			closeVehicleStockModal();
			
			// √ñnce session kontrol√º yap
			$.ajax({
				url: '/api/admin/check-session',
				method: 'GET',
				success: function(sessionResponse) {
					if (!sessionResponse.authenticated) {
						showAlert('error', 'Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');
						$('#pageContent').hide();
						$('#loginScreen').show();
						return;
					}
					
					// Session var, ara√ß stoƒüuna ekleme i≈ülemini yap
					performAddToVehicleStock(items);
				},
				error: function() {
					showAlert('error', 'Oturum kontrol√º yapƒ±lamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n.');
					$('#pageContent').hide();
					$('#loginScreen').show();
				}
			});
			
			function performAddToVehicleStock(items) {
				$.ajax({
					url: '/api/vehicle-stock',
					method: 'POST',
					contentType: 'application/json',
					data: JSON.stringify({
						items: items
					}),
					success: function(response) {
						if (response.success) {
							var message = response.added + ' √ºr√ºn ara√ß stoƒüuna eklendi!';
							if (response.errors && response.errors.length > 0) {
								message += '\n\nHatalar:\n' + response.errors.join('\n');
							}
							showAlert('success', message);
							
							// Sayfayƒ± yenile (ana stok g√ºncellenmi≈ü olabilir)
							setTimeout(function() {
								window.location.reload();
							}, 1500);
						}
					},
					error: function(xhr) {
						var errorMsg = 'Ara√ß stoƒüuna eklenirken hata olu≈ütu!';
						if (xhr.responseJSON && xhr.responseJSON.error) {
							errorMsg = xhr.responseJSON.error;
						}
						if (xhr.status === 401) {
							showAlert('error', 'Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');
							$('#pageContent').hide();
							$('#loginScreen').show();
						} else {
							showAlert('error', errorMsg);
						}
					}
				});
			}
		}
		
		// Toplu stok ekle - her √ºr√ºn√ºn kendi miktar input'unu kullan
		function bulkAddStock() {
			var selected = [];
			$('.product-checkbox:checked').each(function() {
				selected.push(parseInt($(this).data('index')));
			});
			
			if (selected.length === 0) {
				showAlert('warning', 'L√ºtfen en az bir √ºr√ºn se√ßin!');
				return;
			}
			
			// √ñnce t√ºm miktarlarƒ± ve √ºr√ºnleri topla (index'ler kaybolmadan √∂nce)
			var operations = [];
			selected.forEach(function(index) {
				var $input = $('#quantity-' + index);
				var quantity = parseInt($input.val()) || 1;
				var product = filteredProducts[index];
				if (product) {
					operations.push({
						product: product,
						quantity: quantity,
						index: index
					});
				}
			});
			
			// √ñzet mesajƒ± olu≈ütur
			var summary = [];
			var totalQuantity = 0;
			operations.forEach(function(op) {
				var title = typeof op.product.title === 'object' ? op.product.title.tr : op.product.title;
				var currentStock = parseInt(op.product.stock) || 0;
				summary.push(title + ': ' + currentStock + ' ‚Üí ' + (currentStock + op.quantity) + ' (+' + op.quantity + ')');
				totalQuantity += op.quantity;
			});
			
			var message = selected.length + ' √ºr√ºn√ºn stoku g√ºncellenecek:\n\n';
			message += summary.join('\n');
			message += '\n\nToplam: ' + totalQuantity + ' adet eklenecek\n\n';
			message += 'Onaylƒ±yor musunuz?';
			
			showConfirm(message, 'Toplu Stok Ekleme').then(function(confirmed) {
				if (!confirmed) return;
				processBulkAdd(operations, selected);
			});
		}
		
		// Toplu ekleme i≈ülemini yap
		function processBulkAdd(operations, selected) {
			
			// T√ºm deƒüi≈üiklikleri productsData'da yap (render etmeden)
			var successCount = 0;
			operations.forEach(function(op) {
				var product = op.product;
				var quantity = op.quantity;
				var currentStock = parseInt(product.stock) || 0;
				var newStock = currentStock + quantity;
				
				// productsData'da bul ve g√ºncelle
				var productIndex = -1;
				var productSku = product.sku || '';
				var productTitle = typeof product.title === 'object' ? product.title.tr : product.title;
				
				// √ñnce SKU ile e≈üle≈ütirmeyi dene
				if (productSku) {
					productIndex = productsData.findIndex(function(p) {
						return (p.sku || '') === productSku;
					});
				}
				
				// SKU ile bulunamazsa title ile dene
				if (productIndex === -1) {
					productIndex = productsData.findIndex(function(p) {
						var pTitle = typeof p.title === 'object' ? p.title.tr : p.title;
						return pTitle === productTitle;
					});
				}
				
				// Hala bulunamazsa, referans ile dene
				if (productIndex === -1) {
					productIndex = productsData.findIndex(function(p) {
						return p === product;
					});
				}
				
				if (productIndex !== -1) {
					productsData[productIndex].stock = newStock;
					product.stock = newStock; // filteredProducts'taki referansƒ± da g√ºncelle
					successCount++;
				}
			});
			
			// LocalStorage'a kaydet
			// localStorage kullanƒ±mƒ± kaldƒ±rƒ±ldƒ± - backend'e kaydediliyor
			
			// Tek seferde render et
			renderProducts();
			
			// Backend'e tek seferde kaydet
			saveToBackend();
			
			// Se√ßimi temizle
			clearSelection();
			
			showAlert('success', successCount + ' √ºr√ºn√ºn stoku g√ºncellendi!');
		}
		
		// Toplu stok √ßƒ±kar - her √ºr√ºn√ºn kendi miktar input'unu kullan
		function bulkRemoveStock() {
			var selected = [];
			$('.product-checkbox:checked').each(function() {
				selected.push(parseInt($(this).data('index')));
			});
			
			if (selected.length === 0) {
				showAlert('warning', 'L√ºtfen en az bir √ºr√ºn se√ßin!');
				return;
			}
			
			// √ñnce t√ºm miktarlarƒ± ve √ºr√ºnleri topla (index'ler kaybolmadan √∂nce)
			var operations = [];
			selected.forEach(function(index) {
				var $input = $('#quantity-' + index);
				var quantity = parseInt($input.val()) || 1;
				var product = filteredProducts[index];
				if (product) {
					operations.push({
						product: product,
						quantity: quantity,
						index: index
					});
				}
			});
			
			// √ñnce kontrol et - hi√ßbirinin stoku 0'ƒ±n altƒ±na d√º≈ümeyecek mi?
			var willFail = false;
			var failedProducts = [];
			operations.forEach(function(op) {
				var currentStock = parseInt(op.product.stock) || 0;
				if (currentStock - op.quantity < 0) {
					willFail = true;
					var title = typeof op.product.title === 'object' ? op.product.title.tr : op.product.title;
					failedProducts.push(title + ' (stok: ' + currentStock + ', √ßƒ±karƒ±lacak: ' + op.quantity + ')');
				}
			});
			
			if (willFail) {
				var errorMsg = 'Bazƒ± √ºr√ºnlerin stoku 0\'ƒ±n altƒ±na d√º≈üecek:\n\n';
				errorMsg += failedProducts.join('\n');
				errorMsg += '\n\nL√ºtfen miktarlarƒ± kontrol edin.';
				showAlert('error', errorMsg);
				return;
			}
			
			// √ñzet mesajƒ± olu≈ütur
			var summary = [];
			var totalQuantity = 0;
			operations.forEach(function(op) {
				var title = typeof op.product.title === 'object' ? op.product.title.tr : op.product.title;
				var currentStock = parseInt(op.product.stock) || 0;
				summary.push(title + ': ' + currentStock + ' ‚Üí ' + (currentStock - op.quantity) + ' (-' + op.quantity + ')');
				totalQuantity += op.quantity;
			});
			
			var message = selected.length + ' √ºr√ºn√ºn stoku g√ºncellenecek:\n\n';
			message += summary.join('\n');
			message += '\n\nToplam: ' + totalQuantity + ' adet √ßƒ±karƒ±lacak\n\n';
			message += 'Onaylƒ±yor musunuz?';
			
			showConfirm(message, 'Toplu Stok √áƒ±karma').then(function(confirmed) {
				if (!confirmed) return;
				processBulkRemove(operations, selected);
			});
		}
		
		// Toplu √ßƒ±karma i≈ülemini yap
		function processBulkRemove(operations, selected) {
			
			// T√ºm deƒüi≈üiklikleri productsData'da yap (render etmeden)
			var successCount = 0;
			operations.forEach(function(op) {
				var product = op.product;
				var quantity = op.quantity;
				var currentStock = parseInt(product.stock) || 0;
				var newStock = currentStock - quantity;
				
				if (newStock >= 0) {
					// productsData'da bul ve g√ºncelle
					var productIndex = -1;
					var productSku = product.sku || '';
					var productTitle = typeof product.title === 'object' ? product.title.tr : product.title;
					
					// √ñnce SKU ile e≈üle≈ütirmeyi dene
					if (productSku) {
						productIndex = productsData.findIndex(function(p) {
							return (p.sku || '') === productSku;
						});
					}
					
					// SKU ile bulunamazsa title ile dene
					if (productIndex === -1) {
						productIndex = productsData.findIndex(function(p) {
							var pTitle = typeof p.title === 'object' ? p.title.tr : p.title;
							return pTitle === productTitle;
						});
					}
					
					// Hala bulunamazsa, referans ile dene
					if (productIndex === -1) {
						productIndex = productsData.findIndex(function(p) {
							return p === product;
						});
					}
					
					if (productIndex !== -1) {
						productsData[productIndex].stock = newStock;
						product.stock = newStock; // filteredProducts'taki referansƒ± da g√ºncelle
						successCount++;
					}
				}
			});
			
			// LocalStorage'a kaydet
			// localStorage kullanƒ±mƒ± kaldƒ±rƒ±ldƒ± - backend'e kaydediliyor
			
			// Tek seferde render et
			renderProducts();
			
			// Backend'e tek seferde kaydet
			saveToBackend();
			
			// Se√ßimi temizle
			clearSelection();
			
			showAlert('success', successCount + ' √ºr√ºn√ºn stoku g√ºncellendi!');
		}
		
		// Direkt stok ekle (onay olmadan - toplu i≈ülem i√ßin)
		function addStockDirect(index, quantity) {
			var product = filteredProducts[index];
			if (!product) return;
			
			updateStock(index, quantity, false); // false = alert g√∂sterme
		}
		
		// Direkt stok √ßƒ±kar (onay olmadan - toplu i≈ülem i√ßin)
		function removeStockDirect(index, quantity) {
			var product = filteredProducts[index];
			if (!product) return;
			
			updateStock(index, -quantity, false); // false = alert g√∂sterme
		}
		
		// Miktar deƒüi≈ütir (quantity input)
		function changeQuantity(index, change) {
			var $input = $('#quantity-' + index);
			var currentValue = parseInt($input.val()) || 1;
			var newValue = currentValue + change;
			
			if (newValue < 1) {
				newValue = 1;
			}
			
			$input.val(newValue);
		}
		
		// Miktar doƒürula
		function validateQuantity(index) {
			var $input = $('#quantity-' + index);
			var value = parseInt($input.val()) || 1;
			
			if (value < 1) {
				value = 1;
				$input.val(value);
			}
		}
		
		// Stok ekle
		function addStock(index) {
			var product = filteredProducts[index];
			if (!product) return;
			
			var $input = $('#quantity-' + index);
			var quantity = parseInt($input.val()) || 1;
			
			var currentStock = parseInt(product.stock) || 0;
			var newStock = currentStock + quantity;
			
			var message = 'Stok ' + quantity + ' adet artƒ±rƒ±lacak.\n\n<strong>Mevcut:</strong> ' + currentStock + '\n<strong>Yeni:</strong> ' + newStock + '\n\nOnaylƒ±yor musunuz?';
			
			showConfirm(message, 'Stok Ekleme').then(function(confirmed) {
				if (confirmed) {
					updateStock(index, quantity);
				}
			});
		}
		
		// Stok √ßƒ±kar
		function removeStock(index) {
			var product = filteredProducts[index];
			if (!product) return;
			
			var $input = $('#quantity-' + index);
			var quantity = parseInt($input.val()) || 1;
			
			var currentStock = parseInt(product.stock) || 0;
			var newStock = currentStock - quantity;
			
			if (newStock < 0) {
				showAlert('error', 'Stok miktarƒ± 0\'ƒ±n altƒ±na d√º≈üemez!');
				return;
			}
			
			var message = 'Stok ' + quantity + ' adet azaltƒ±lacak.\n\n<strong>Mevcut:</strong> ' + currentStock + '\n<strong>Yeni:</strong> ' + newStock + '\n\nOnaylƒ±yor musunuz?';
			
			showConfirm(message, 'Stok √áƒ±karma').then(function(confirmed) {
				if (confirmed) {
					updateStock(index, -quantity);
				}
			});
		}
		
		// Stok g√ºncelle (i√ß fonksiyon - quantity deƒüeri ile)
		function updateStock(index, change, showAlertMsg) {
			if (showAlertMsg === undefined) showAlertMsg = true;
			var product = filteredProducts[index];
			if (!product) return;
			
			var currentStock = parseInt(product.stock) || 0;
			var newStock = currentStock + change;
			
			if (newStock < 0) {
				if (showAlertMsg) showAlert('error', 'Stok miktarƒ± 0\'ƒ±n altƒ±na d√º≈üemez!');
				return;
			}
			
			// productsData'da bul ve g√ºncelle - SKU veya title ile e≈üle≈ütir
			var productIndex = -1;
			var productSku = product.sku || '';
			var productTitle = typeof product.title === 'object' ? product.title.tr : product.title;
			
			// √ñnce SKU ile e≈üle≈ütirmeyi dene
			if (productSku) {
				productIndex = productsData.findIndex(function(p) {
					return (p.sku || '') === productSku;
				});
			}
			
			// SKU ile bulunamazsa title ile dene
			if (productIndex === -1) {
				productIndex = productsData.findIndex(function(p) {
					var pTitle = typeof p.title === 'object' ? p.title.tr : p.title;
					return pTitle === productTitle;
				});
			}
			
			// Hala bulunamazsa, referans ile dene
			if (productIndex === -1) {
				productIndex = productsData.findIndex(function(p) {
					return p === product;
				});
			}
			
			if (productIndex !== -1) {
				// Stok bilgisini g√ºncelle - hem productsData'da hem de filteredProducts'ta
				productsData[productIndex].stock = newStock;
				product.stock = newStock;
				
				// LocalStorage'a kaydet
				// localStorage kullanƒ±mƒ± kaldƒ±rƒ±ldƒ± - backend'e kaydediliyor
				
				// UI'ƒ± √∂nce g√ºncelle
				renderProducts();
				
				// Backend'e otomatik kaydet (her deƒüi≈üiklikte) - UI g√ºncellemesinden sonra
				saveToBackend();
				
				if (showAlertMsg) {
					var changeText = change > 0 ? '+' + change : change;
					// Ba≈üarƒ±lƒ± g√ºncelleme - sessiz (alert g√∂sterme)
				}
			} else {
				if (showAlertMsg) showAlert('error', '√úr√ºn bulunamadƒ±!');
			}
		}
		
		// Backend'e kaydet (otomatik √ßaƒürƒ±lƒ±yor)
		function saveToBackend() {
			// √ñnce session kontrol√º yap
			$.ajax({
				url: '/api/admin/check-session',
				method: 'GET',
				success: function(sessionResponse) {
					if (!sessionResponse.authenticated) {
						console.warn('‚ö†Ô∏è Session expired, skipping auto-save');
						return;
					}
					
					// Session var, kaydetme i≈ülemini yap
					performSave();
				},
				error: function() {
					console.warn('‚ö†Ô∏è Session check failed, skipping auto-save');
				}
			});
			
			function performSave() {
				// mainCategories'ƒ± y√ºkle
				var mainCategories = [];
				if (typeof window.mainCategories !== 'undefined') {
					mainCategories = window.mainCategories;
				} else {
					var stored = localStorage.getItem('adminMainCategories');
					if (stored) {
						try {
							mainCategories = JSON.parse(stored);
						} catch(e) {}
					}
				}
				
				// Carousel verilerini de al (varsa)
				var carousel = null;
				var carouselData = [];
				var autoCategoryExcluded = [];
				
				var carouselStored = localStorage.getItem('adminCarousel');
				if (carouselStored) {
					try {
						var parsed = JSON.parse(carouselStored);
						if (Array.isArray(parsed)) {
							carouselData = parsed;
						} else if (parsed && parsed.slides) {
							carouselData = parsed.slides;
						}
					} catch(e) {}
				}
				
				var excludedStored = localStorage.getItem('adminCarouselExcluded');
				if (excludedStored) {
					try {
						autoCategoryExcluded = JSON.parse(excludedStored);
					} catch(e) {}
				}
				
				if (carouselData.length > 0 || autoCategoryExcluded.length > 0) {
					carousel = {
						slides: carouselData,
						excludedAutoCategories: autoCategoryExcluded
					};
				}
				
				$.ajax({
					url: '/api/products/save',
					method: 'POST',
					contentType: 'application/json',
					data: JSON.stringify({
						products: productsData,
						mainCategories: mainCategories,
						carousel: carousel
					}),
					success: function(response) {
						// Ba≈üarƒ±lƒ± kayƒ±t - localStorage'ƒ± da g√ºncelle
						// localStorage kullanƒ±mƒ± kaldƒ±rƒ±ldƒ± - backend'e kaydediliyor
						console.log('‚úÖ Products saved to backend successfully');
					},
					error: function(xhr, status, error) {
						if (xhr.status === 401) {
							console.warn('‚ö†Ô∏è Session expired during save');
						} else {
							console.error('‚ùå Error saving products to backend:', error);
						}
					}
				});
			}
		}
		
		// Manuel sunucuya kaydet butonu i√ßin
		function saveStockToServer() {
			// √ñnce session kontrol√º yap
			$.ajax({
				url: '/api/admin/check-session',
				method: 'GET',
				success: function(sessionResponse) {
					if (!sessionResponse.authenticated) {
						showAlert('error', 'Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');
						$('#pageContent').hide();
						$('#loginScreen').show();
						return;
					}
					
					// Session var, kaydetme i≈ülemini yap
					performSave();
				},
				error: function() {
					showAlert('error', 'Oturum kontrol√º yapƒ±lamadƒ±. L√ºtfen tekrar giri≈ü yapƒ±n.');
					$('#pageContent').hide();
					$('#loginScreen').show();
				}
			});
			
			function performSave() {
				// mainCategories'ƒ± y√ºkle
				var mainCategories = [];
				if (typeof window.mainCategories !== 'undefined') {
					mainCategories = window.mainCategories;
				} else {
					var stored = localStorage.getItem('adminMainCategories');
					if (stored) {
						try {
							mainCategories = JSON.parse(stored);
						} catch(e) {}
					}
				}
				
				// Carousel verilerini de al (varsa)
				var carousel = null;
				var carouselData = [];
				var autoCategoryExcluded = [];
				
				var carouselStored = localStorage.getItem('adminCarousel');
				if (carouselStored) {
					try {
						var parsed = JSON.parse(carouselStored);
						if (Array.isArray(parsed)) {
							carouselData = parsed;
						} else if (parsed && parsed.slides) {
							carouselData = parsed.slides;
						}
					} catch(e) {}
				}
				
				var excludedStored = localStorage.getItem('adminCarouselExcluded');
				if (excludedStored) {
					try {
						autoCategoryExcluded = JSON.parse(excludedStored);
					} catch(e) {}
				}
				
				if (carouselData.length > 0 || autoCategoryExcluded.length > 0) {
					carousel = {
						slides: carouselData,
						excludedAutoCategories: autoCategoryExcluded
					};
				}
				
				$.ajax({
					url: '/api/products/save',
					method: 'POST',
					contentType: 'application/json',
					data: JSON.stringify({
						products: productsData,
						mainCategories: mainCategories,
						carousel: carousel
					}),
					success: function(response) {
						// localStorage kullanƒ±mƒ± kaldƒ±rƒ±ldƒ± - backend'e kaydediliyor
						showAlert('success', 'Stoklar ba≈üarƒ±yla kaydedildi!');
					},
					error: function(xhr, status, error) {
						if (xhr.status === 401) {
							showAlert('error', 'Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');
							$('#pageContent').hide();
							$('#loginScreen').show();
						} else {
							showAlert('error', 'Stoklar kaydedilemedi: ' + error);
						}
					}
				});
			}
		}
		
		// Modern Popup Modal Fonksiyonlarƒ±
		var popupResolve = null;
		
		// Alert popup (sadece OK butonu)
		function showAlert(type, message) {
			return new Promise(function(resolve) {
				var $modal = $('#popupModal');
				var $icon = $('#popupIcon');
				var $title = $('#popupTitle');
				var $message = $('#popupMessage');
				var $footer = $('#popupFooter');
				
				// ƒ∞kon ve ba≈ülƒ±k ayarla
				var icon = '‚Ñπ';
				var title = 'Bilgi';
				
				switch(type) {
					case 'success':
						icon = '‚úì';
						title = 'Ba≈üarƒ±lƒ±';
						break;
					case 'error':
						icon = '‚úï';
						title = 'Hata';
						break;
					case 'warning':
						icon = '‚ö†';
						title = 'Uyarƒ±';
						break;
				}
				
				$icon.text(icon);
				$title.text(title);
				$message.html(message.replace(/\n/g, '<br>'));
				
				// Footer - sadece OK butonu
				$footer.html(
					'<button class="popup-btn popup-btn-primary" onclick="closePopup()">Tamam</button>'
				);
				
				popupResolve = resolve;
				$modal.addClass('show');
				
				// Enter tu≈üu ile kapat
				$(document).off('keydown.popup').on('keydown.popup', function(e) {
					if (e.key === 'Enter' || e.key === 'Escape') {
						closePopup();
					}
				});
			});
		}
		
		// Confirm popup (OK ve Cancel butonlarƒ±)
		function showConfirm(message, title) {
			if (!title) title = 'Onay';
			
			return new Promise(function(resolve) {
				var $modal = $('#popupModal');
				var $icon = $('#popupIcon');
				var $titleEl = $('#popupTitle');
				var $message = $('#popupMessage');
				var $footer = $('#popupFooter');
				
				$icon.text('‚ùì');
				$titleEl.text(title);
				$message.html(message.replace(/\n/g, '<br>'));
				
				// Footer - OK ve Cancel butonlarƒ±
				$footer.html(
					'<button class="popup-btn popup-btn-secondary" onclick="closePopup(false)">ƒ∞ptal</button>' +
					'<button class="popup-btn popup-btn-primary" onclick="closePopup(true)">Tamam</button>'
				);
				
				popupResolve = resolve;
				$modal.addClass('show');
				
				// Enter ve Escape tu≈ülarƒ±
				$(document).off('keydown.popup').on('keydown.popup', function(e) {
					if (e.key === 'Enter') {
						closePopup(true);
					} else if (e.key === 'Escape') {
						closePopup(false);
					}
				});
			});
		}
		
		// Popup'ƒ± kapat
		function closePopup(result) {
			var $modal = $('#popupModal');
			$modal.removeClass('show');
			$(document).off('keydown.popup');
			
			if (popupResolve) {
				popupResolve(result !== false);
				popupResolve = null;
			}
		}
		
		// Overlay'e tƒ±klayƒ±nca kapatma (confirm i√ßin iptal)
		$(document).on('click', '.popup-modal-overlay', function(e) {
			if (e.target === this) {
				closePopup(false);
			}
		});
		
		// HTML escape
		function escapeHtml(text) {
			if (typeof text !== 'string') return text;
			var map = {
				'&': '&amp;',
				'<': '&lt;',
				'>': '&gt;',
				'"': '&quot;',
				"'": '&#039;'
			};
			return text.replace(/[&<>"']/g, function(m) { return map[m]; });
		}
		
		// Global fonksiyonlar (onclick i√ßin)
		window.changeQuantity = changeQuantity;
		window.validateQuantity = validateQuantity;
		window.addStock = addStock;
		window.removeStock = removeStock;
		window.updateStock = updateStock;
		window.updateSelection = updateSelection;
		window.clearSelection = clearSelection;
		window.bulkAddStock = bulkAddStock;
		window.bulkRemoveStock = bulkRemoveStock;
		window.saveStockToServer = saveStockToServer;
		window.closePopup = closePopup;
		window.addToVehicleStock = addToVehicleStock;
		window.closeVehicleStockModal = closeVehicleStockModal;
		window.changeVehicleQuantity = changeVehicleQuantity;
		window.validateVehicleQuantity = validateVehicleQuantity;
		window.confirmAddToVehicleStock = confirmAddToVehicleStock;
	</script>
	
	<script>
		// BACKEND SESSION KULLANIYOR - localStorage/sessionStorage yok
		var MAX_LOGIN_ATTEMPTS = 5;
		var LOGIN_ATTEMPTS_KEY = 'adminLoginAttempts';
		var LOCKOUT_TIME_KEY = 'adminLockoutUntil';
		var LOCKOUT_DURATION = 15 * 60 * 1000;

		function checkLogin() {
			checkLockout();
			
			// Backend'e session kontrol√º i√ßin istek at
			$.ajax({
				url: '/api/admin/check-session',
				method: 'GET',
				success: function(response) {
					if (response.authenticated) {
						// Session var - i√ßeriƒüi g√∂ster
						$('#loginScreen').hide();
						$('#pageContent').show();
						// Sayfayƒ± ba≈ülat
						if (typeof initStockPage === 'function') {
							initStockPage();
						}
					} else {
						// Session yok veya s√ºresi dolmu≈ü
						if (response.expired) {
							showAlert('warning', 'Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');
						}
						$('#loginScreen').show();
						$('#pageContent').hide();
					}
				},
				error: function() {
					// Hata durumunda login ekranƒ±nƒ± g√∂ster
					$('#loginScreen').show();
					$('#pageContent').hide();
				}
			});
		}

		function checkLockout() {
			var lockoutUntil = localStorage.getItem(LOCKOUT_TIME_KEY);
			if (lockoutUntil) {
				var now = Date.now();
				var unlockTime = parseInt(lockoutUntil);
				
				if (now < unlockTime) {
					var remainingMinutes = Math.ceil((unlockTime - now) / (60 * 1000));
					$('#loginError').html('‚õî √áok fazla yanlƒ±≈ü deneme!<br>L√ºtfen ' + remainingMinutes + ' dakika sonra tekrar deneyin.').fadeIn(300);
					$('#adminPassword').prop('disabled', true);
					$('button[onclick="checkPassword()"]').prop('disabled', true);
					return true;
				} else {
					localStorage.removeItem(LOCKOUT_TIME_KEY);
					localStorage.removeItem(LOGIN_ATTEMPTS_KEY);
					$('#adminPassword').prop('disabled', false);
					$('button[onclick="checkPassword()"]').prop('disabled', false);
				}
			}
			return false;
		}
		
		function checkPassword() {
			if (checkLockout()) return;
			
			var password = $('#adminPassword').val();
			
			if (!password) {
				$('#loginError').text('‚ö†Ô∏è ≈ûifre gerekli!').fadeIn(300);
				return;
			}
			
			$.ajax({
				url: '/api/admin/check-password',
				method: 'POST',
				contentType: 'application/json',
				data: JSON.stringify({ password: password }),
				success: function(response) {
					if (response.success) {
						localStorage.removeItem(LOGIN_ATTEMPTS_KEY);
						localStorage.removeItem(LOCKOUT_TIME_KEY);
						
						// Backend session olu≈üturuldu - frontend'de bir ≈üey yapmaya gerek yok
					
					// Overlay'i gizle
					$('#pageTransition').removeClass('show').addClass('hide');
					
					$('#loginScreen').fadeOut(300);
					$('#pageContent').fadeIn(300);
					$('#loginError').hide();
					$('#adminPassword').val('');
					$('#adminPassword').prop('disabled', false);
					$('button[onclick="checkPassword()"]').prop('disabled', false);
					// Sayfayƒ± ba≈ülat
					initStockPage();
					}
				},
				error: function(xhr) {
					var attempts = parseInt(localStorage.getItem(LOGIN_ATTEMPTS_KEY) || '0');
					attempts++;
					localStorage.setItem(LOGIN_ATTEMPTS_KEY, attempts.toString());
					
					var remainingAttempts = MAX_LOGIN_ATTEMPTS - attempts;
					
					if (attempts >= MAX_LOGIN_ATTEMPTS) {
						var lockoutUntil = Date.now() + LOCKOUT_DURATION;
						localStorage.setItem(LOCKOUT_TIME_KEY, lockoutUntil.toString());
						
						$('#loginError').html('‚õî √áok fazla yanlƒ±≈ü deneme!<br>Hesap 15 dakika s√ºreyle kilitlendi.').fadeIn(300);
						$('#adminPassword').prop('disabled', true);
						$('button[onclick="checkPassword()"]').prop('disabled', true);
						
						setTimeout(function() {
							localStorage.removeItem(LOCKOUT_TIME_KEY);
							localStorage.removeItem(LOGIN_ATTEMPTS_KEY);
							$('#loginError').hide();
							$('#adminPassword').prop('disabled', false);
							$('button[onclick="checkPassword()"]').prop('disabled', false);
							$('#adminPassword').val('').focus();
						}, LOCKOUT_DURATION);
					} else {
						var errorMsg = '‚ùå Yanlƒ±≈ü ≈üifre!';
						if (xhr.responseJSON && xhr.responseJSON.error) {
							errorMsg = '‚ùå ' + xhr.responseJSON.error;
						}
						errorMsg += '<br>Kalan deneme hakkƒ±: ' + remainingAttempts;
						$('#loginError').html(errorMsg).fadeIn(300);
					}
					
					$('#adminPassword').val('').focus();
				}
			});
		}

		$(document).on('keypress', '#adminPassword', function(e) {
			if (e.which === 13) {
				checkPassword();
			}
		});
		
		// Session timeout kontrol√º
		setInterval(function() {
			var lockoutUntil = localStorage.getItem(LOCKOUT_TIME_KEY);
			if (lockoutUntil) {
				var now = Date.now();
				var unlockTime = parseInt(lockoutUntil);
				
				if (now < unlockTime) {
					var remainingMinutes = Math.ceil((unlockTime - now) / (60 * 1000));
					$('#loginError').html('‚õî √áok fazla yanlƒ±≈ü deneme!<br>L√ºtfen ' + remainingMinutes + ' dakika sonra tekrar deneyin.');
				} else {
					localStorage.removeItem(LOCKOUT_TIME_KEY);
					localStorage.removeItem(LOGIN_ATTEMPTS_KEY);
					$('#loginError').hide();
					$('#adminPassword').prop('disabled', false);
					$('button[onclick="checkPassword()"]').prop('disabled', false);
				}
			}
			
			// Backend'den session kontrol√º
			$.ajax({
				url: '/api/admin/check-session',
				method: 'GET',
				success: function(response) {
					if (!response.authenticated) {
						if (response.expired) {
							showAlert('warning', 'Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');
						}
						$('#pageContent').fadeOut(300);
						$('#loginScreen').fadeIn(300);
					}
				},
				error: function() {
					// Hata durumunda bir ≈üey yapma
				}
			});
		}, 60000);

		// Sayfa y√ºklendiƒüinde kontrol et
		$(document).ready(function() {
			checkLogin();
			
			// Backend session kontrol√º zaten checkLogin() i√ßinde yapƒ±lƒ±yor
			// Burada sadece overlay'i ayarla
			$('#pageTransition').removeClass('show').addClass('hide');
			
			// Admin Paneli linkine animasyonlu ge√ßi≈ü ekle
			$('a[href="admin.html"]').on('click', function(e) {
				e.preventDefault();
				$('#pageTransition').removeClass('hide').addClass('show');
				setTimeout(function() {
					window.location.href = 'admin.html';
				}, 300);
			});
		});
	</script>
	
	<!-- Ge√ßi≈ü Overlay -->
	<div class="page-transition-overlay" id="pageTransition">
		<div class="spinner"></div>
	</div>
	</div>
</body>
</html>

